{
  "id": "domain1-server-post",
  "title": "Server POST and BIOS Verification",
  "domain": "domain1",
  "difficulty": "beginner",
  "description": "Learn how to verify successful Power-On Self-Test (POST) completion and BIOS configuration on DGX systems. This scenario covers checking system logs, verifying hardware initialization, and identifying POST-related issues.",
  "learningObjectives": [
    "Understand the DGX boot sequence and POST process",
    "Use ipmitool to check system event logs for POST errors",
    "Verify BIOS version and configuration settings",
    "Identify common POST failure indicators"
  ],
  "faults": [],
  "initialClusterState": {},
  "steps": [
    {
      "id": "step1",
      "title": "Check System Event Log (SEL)",
      "description": "Use ipmitool to examine the System Event Log (SEL) for any POST-related errors or warnings that occurred during the last boot sequence.",
      "objectives": [
        "Access the BMC using ipmitool",
        "Retrieve and review the System Event Log",
        "Identify any critical or warning events related to POST"
      ],
      "expectedCommands": ["ipmitool sel list", "ipmitool sel elist"],
      "validationRules": [
        {
          "type": "command-executed",
          "description": "Must execute ipmitool sel list command",
          "expectedCommands": ["ipmitool sel list", "ipmitool sel elist"],
          "requireAllCommands": true
        }
      ],
      "hints": [
        "Use 'ipmitool sel list' to view the System Event Log",
        "Look for entries with 'POST Error' or 'System Event' in the description",
        "Pay attention to the timestamp and severity of each event"
      ],
      "enhancedHints": [
        {
          "id": "step1-hint1",
          "level": 1,
          "message": "Try exploring the IPMI tools. The command you need starts with 'ipmitool' and relates to system events.",
          "trigger": {
            "type": "time-based",
            "timeSeconds": 30
          }
        },
        {
          "id": "step1-hint2",
          "level": 2,
          "message": "Use 'ipmitool sel list' to view the System Event Log. This shows POST errors and hardware events from the BMC.",
          "trigger": {
            "type": "attempt-based",
            "attemptCount": 2
          },
          "condition": {
            "commandsNotExecuted": ["ipmitool sel"]
          }
        },
        {
          "id": "step1-hint3",
          "level": 3,
          "message": "Execute: ipmitool sel list\n\nThis displays the full System Event Log with timestamps, showing any POST errors or warnings from the boot sequence.",
          "trigger": {
            "type": "attempt-based",
            "attemptCount": 3
          }
        }
      ],
      "estimatedDuration": 5,
      "documentationLinks": [
        {
          "title": "IPMI Tool Documentation",
          "url": "https://linux.die.net/man/1/ipmitool"
        }
      ]
    },
    {
      "id": "step2",
      "title": "Verify BIOS Version",
      "description": "Check the current BIOS version installed on the system and verify it matches the recommended version for your DGX model.",
      "objectives": [
        "Query the BMC for BIOS firmware version",
        "Compare against recommended BIOS version",
        "Document the current BIOS version for compliance"
      ],
      "expectedCommands": ["ipmitool fru print 0", "ipmitool mc info"],
      "validationRules": [
        {
          "type": "command-executed",
          "description": "Must execute command to check BIOS version",
          "expectedCommands": ["ipmitool fru print 0", "ipmitool mc info"],
          "requireAllCommands": true
        }
      ],
      "hints": [
        "Use 'ipmitool fru print 0' to see FRU (Field Replaceable Unit) information",
        "The BIOS version is typically listed in the product information section",
        "You can also use 'dmidecode -t bios' to check BIOS version from the OS"
      ],
      "estimatedDuration": 3,
      "documentationLinks": [
        {
          "title": "DGX BIOS Management Guide",
          "url": "https://docs.nvidia.com/dgx/"
        }
      ]
    },
    {
      "id": "step3",
      "title": "Verify CPU and Memory Initialization",
      "description": "Confirm that all CPUs and memory modules were successfully initialized during POST. Check for any hardware that failed to initialize.",
      "objectives": [
        "Verify all CPU sockets are detected and operational",
        "Confirm all installed memory is recognized",
        "Check for any memory training errors"
      ],
      "expectedCommands": ["lscpu", "free -h", "dmidecode -t memory"],
      "validationRules": [
        {
          "type": "command-executed",
          "description": "Must check CPU and memory status",
          "expectedCommands": [
            "lscpu",
            "free -h",
            "dmidecode -t memory",
            "dmidecode -t processor"
          ],
          "requireAllCommands": true
        }
      ],
      "hints": [
        "Use 'lscpu' to see CPU architecture and core count",
        "Use 'free -h' to see total available memory",
        "Use 'dmidecode -t memory' for detailed memory module information",
        "Compare detected memory against the physical installation"
      ],
      "enhancedHints": [
        {
          "id": "step3-hint1",
          "level": 1,
          "message": "Start by checking the CPU information. There's a simple command to list CPU details.",
          "trigger": {
            "type": "time-based",
            "timeSeconds": 45
          }
        },
        {
          "id": "step3-hint2",
          "level": 2,
          "message": "Use 'lscpu' to view CPU architecture and core count. Then check memory with 'free -h' to see total RAM.",
          "trigger": {
            "type": "attempt-based",
            "attemptCount": 2
          }
        },
        {
          "id": "step3-hint3",
          "level": 2,
          "message": "For detailed hardware info, use 'dmidecode'. Try 'dmidecode -t processor' for CPU details or 'dmidecode -t memory' for RAM modules.",
          "trigger": {
            "type": "command-based",
            "commandPattern": "lscpu|free"
          },
          "condition": {
            "commandsNotExecuted": ["dmidecode"]
          }
        },
        {
          "id": "step3-hint4",
          "level": 3,
          "message": "Complete command sequence:\n1. lscpu - View CPU information\n2. free -h - Check total memory\n3. dmidecode -t memory - Detailed memory module info\n\nRun all three to verify CPU and memory initialization.",
          "trigger": {
            "type": "attempt-based",
            "attemptCount": 4
          }
        }
      ],
      "estimatedDuration": 5,
      "documentationLinks": [
        {
          "title": "dmidecode Man Page",
          "url": "https://linux.die.net/man/8/dmidecode"
        }
      ]
    },
    {
      "id": "step4",
      "title": "Verify PCIe Device Enumeration",
      "description": "Confirm that all PCIe devices (GPUs, NICs, storage controllers) were successfully enumerated during POST and are visible to the operating system.",
      "objectives": [
        "List all PCIe devices detected by the system",
        "Verify GPU devices are present on expected PCIe buses",
        "Check for any PCIe link errors or degraded links"
      ],
      "expectedCommands": ["lspci", "lspci -tv", "nvidia-smi"],
      "validationRules": [
        {
          "type": "command-executed",
          "description": "Must check PCIe device enumeration",
          "expectedCommands": ["lspci", "lspci -tv", "nvidia-smi"],
          "requireAllCommands": true
        }
      ],
      "hints": [
        "Use 'lspci' to list all PCI devices",
        "Use 'lspci -tv' for a tree view showing PCIe topology",
        "Use 'nvidia-smi' to verify all GPUs are detected",
        "Look for NVIDIA devices with '3D controller' or 'VGA compatible controller' class"
      ],
      "estimatedDuration": 5,
      "documentationLinks": [
        {
          "title": "lspci Man Page",
          "url": "https://linux.die.net/man/8/lspci"
        }
      ]
    },
    {
      "id": "step5",
      "title": "Check Boot Messages for Warnings",
      "description": "Review kernel boot messages (dmesg) for any warnings or errors that occurred during hardware initialization. Document any anomalies.",
      "objectives": [
        "Review dmesg output for POST-related messages",
        "Identify any hardware initialization warnings",
        "Understand the boot sequence timeline"
      ],
      "expectedCommands": [
        "dmesg",
        "dmesg | grep -i error",
        "dmesg | grep -i warning"
      ],
      "validationRules": [
        {
          "type": "command-executed",
          "description": "Must review boot messages",
          "expectedCommands": [
            "dmesg",
            "dmesg | grep -i error",
            "dmesg | grep -i warning",
            "journalctl -b"
          ],
          "requireAllCommands": true
        }
      ],
      "hints": [
        "Use 'dmesg' to see kernel ring buffer messages",
        "Use 'dmesg | grep -i error' to filter for errors",
        "Use 'dmesg | grep -i warning' to see warnings",
        "Pay attention to ACPI, PCIe, and memory-related messages"
      ],
      "estimatedDuration": 7,
      "documentationLinks": [
        {
          "title": "dmesg Man Page",
          "url": "https://linux.die.net/man/1/dmesg"
        }
      ]
    }
  ],
  "successCriteria": [
    "Successfully accessed BMC and retrieved System Event Log",
    "Verified BIOS version is current and documented",
    "Confirmed all CPUs and memory are detected",
    "Verified all GPUs are enumerated on PCIe bus",
    "Reviewed boot messages and identified any warnings"
  ],
  "estimatedTime": 25,
  "prerequisites": [],
  "tags": ["post", "bios", "boot", "hardware-initialization", "beginner"],
  "tier": 1,
  "commandFamilies": ["bmc-hardware", "diagnostics"],
  "toolHints": true
}
