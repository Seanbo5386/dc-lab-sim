{
  "id": "domain1-hw-inventory",
  "title": "Hardware Inventory Validation and Component Verification",
  "domain": "domain1",
  "difficulty": "beginner",
  "description": "Learn the essential first steps when commissioning or troubleshooting a DGX system: validating the hardware inventory. This includes verifying CPU, memory, GPU, and network components match expected configurations. This foundational skill is critical for the NCP-AII certification and real-world operations.",
  "learningObjectives": [
    "Use dmidecode to query system hardware information",
    "Verify CPU count, type, and configuration",
    "Validate system memory configuration",
    "Confirm GPU count and model",
    "Check network adapter inventory",
    "Compare actual vs expected hardware configuration"
  ],
  "faults": [],
  "initialClusterState": {},
  "steps": [
    {
      "id": "step1",
      "title": "Query System Information with dmidecode",
      "description": "dmidecode is the primary tool for querying hardware information from the system's SMBIOS/DMI tables. Learn to use it effectively.",
      "objectives": [
        "View system manufacturer and product name",
        "Check BIOS version",
        "Identify system serial number",
        "Understand dmidecode output structure"
      ],
      "expectedCommands": [
        "dmidecode -t system",
        "dmidecode -t bios"
      ],
      "validationRules": [
        {
          "type": "command-executed",
          "description": "Must query system information",
          "expectedCommands": ["dmidecode -t system", "dmidecode -t bios", "dmidecode"]
        }
      ],
      "hints": [
        "Use 'dmidecode -t system' for system-level information",
        "Use 'dmidecode -t bios' for BIOS version information",
        "DGX systems show 'NVIDIA' as manufacturer",
        "Serial number is needed for warranty and support cases",
        "BIOS version is important for compatibility verification",
        "dmidecode requires root/sudo privileges"
      ],
      "estimatedDuration": 5,
      "documentationLinks": [
        {
          "title": "dmidecode Manual",
          "url": "https://linux.die.net/man/8/dmidecode"
        }
      ]
    },
    {
      "id": "step2",
      "title": "Validate CPU Configuration",
      "description": "Verify the CPU configuration matches expected specifications for the DGX model.",
      "objectives": [
        "Count physical CPUs",
        "Identify CPU model and specifications",
        "Check core count and thread count",
        "Verify CPU frequency"
      ],
      "expectedCommands": [
        "dmidecode -t processor",
        "lscpu",
        "cat /proc/cpuinfo | grep -E 'processor|model name' | head -20"
      ],
      "validationRules": [
        {
          "type": "command-executed",
          "description": "Must validate CPU",
          "expectedCommands": ["dmidecode -t processor", "lscpu"]
        }
      ],
      "hints": [
        "DGX A100: 2x AMD EPYC 7742 (64 cores each, 128 total)",
        "DGX H100: 2x Intel Xeon 8480C (56 cores each, 112 total)",
        "'lscpu' shows logical CPU count and architecture",
        "dmidecode -t processor shows physical CPU details",
        "Check 'Core Count' and 'Thread Count' in dmidecode output",
        "Verify no 'Disabled' status on any CPU socket"
      ],
      "estimatedDuration": 5,
      "documentationLinks": [
        {
          "title": "DGX Specifications",
          "url": "https://docs.nvidia.com/dgx/"
        }
      ]
    },
    {
      "id": "step3",
      "title": "Validate System Memory",
      "description": "Verify the system memory (RAM) configuration is correct and all DIMMs are detected.",
      "objectives": [
        "Check total system memory",
        "Count memory DIMMs",
        "Verify DIMM sizes and speeds",
        "Identify any missing or failed DIMMs"
      ],
      "expectedCommands": [
        "dmidecode -t memory",
        "free -h",
        "dmidecode -t memory | grep -E 'Size|Speed|Locator'"
      ],
      "validationRules": [
        {
          "type": "command-executed",
          "description": "Must validate memory",
          "expectedCommands": ["dmidecode -t memory", "free -h"]
        }
      ],
      "hints": [
        "DGX A100: 1TB (1024 GB) DDR4 memory",
        "DGX H100: 2TB (2048 GB) DDR5 memory",
        "Look for 'Size: 32 GB' or similar per DIMM",
        "'No Module Installed' indicates empty slot (may be normal)",
        "'Unknown' for size may indicate DIMM issue",
        "Total should match system specifications"
      ],
      "estimatedDuration": 5,
      "documentationLinks": [
        {
          "title": "Memory Configuration",
          "url": "https://docs.nvidia.com/dgx/"
        }
      ]
    },
    {
      "id": "step4",
      "title": "Validate GPU Inventory",
      "description": "Verify all GPUs are detected and match the expected configuration.",
      "objectives": [
        "Count GPUs with nvidia-smi",
        "Verify GPU model",
        "Check GPU memory size",
        "Identify GPU UUIDs"
      ],
      "expectedCommands": [
        "nvidia-smi -L",
        "nvidia-smi --query-gpu=index,name,memory.total,uuid --format=csv",
        "lspci | grep -i nvidia"
      ],
      "validationRules": [
        {
          "type": "command-executed",
          "description": "Must validate GPUs",
          "expectedCommands": ["nvidia-smi -L", "lspci | grep"]
        }
      ],
      "hints": [
        "DGX A100/H100: 8 GPUs expected",
        "Each GPU should show correct model (A100, H100)",
        "Memory: A100-80GB = 81920 MiB, H100-80GB = 81559 MiB",
        "UUID is globally unique and useful for tracking",
        "lspci shows PCIe-level GPU detection",
        "Missing GPU = check physical seating and power"
      ],
      "estimatedDuration": 5,
      "documentationLinks": [
        {
          "title": "nvidia-smi Documentation",
          "url": "https://developer.nvidia.com/nvidia-system-management-interface"
        }
      ]
    },
    {
      "id": "step5",
      "title": "Validate Network Adapters",
      "description": "Verify all network adapters (InfiniBand, Ethernet) are detected.",
      "objectives": [
        "List all network adapters",
        "Identify InfiniBand HCAs",
        "Check Ethernet NICs",
        "Verify adapter count matches specifications"
      ],
      "expectedCommands": [
        "lspci | grep -i mellanox",
        "ibstat",
        "ip link show"
      ],
      "validationRules": [
        {
          "type": "command-executed",
          "description": "Must validate network adapters",
          "expectedCommands": ["lspci | grep", "ibstat"]
        }
      ],
      "hints": [
        "DGX A100: 8x ConnectX-6 HDR InfiniBand adapters",
        "DGX H100: 8x ConnectX-7 NDR InfiniBand adapters",
        "Each IB adapter appears as a PCIe device",
        "'ibstat' shows InfiniBand port status",
        "BlueField DPUs also appear in lspci",
        "All ports should show 'Active' state when cabled"
      ],
      "estimatedDuration": 5,
      "documentationLinks": [
        {
          "title": "Networking Configuration",
          "url": "https://docs.nvidia.com/networking/"
        }
      ]
    },
    {
      "id": "step6",
      "title": "Check NVLink and NVSwitch",
      "description": "Verify the NVLink fabric and NVSwitch components are detected and operational.",
      "objectives": [
        "View GPU topology",
        "Verify NVLink connectivity",
        "Check NVSwitch status",
        "Understand topology matrix"
      ],
      "expectedCommands": [
        "nvidia-smi topo -m",
        "nvidia-smi nvlink -s",
        "lspci | grep -i nvswitch"
      ],
      "validationRules": [
        {
          "type": "command-executed",
          "description": "Must validate NVLink/NVSwitch",
          "expectedCommands": ["nvidia-smi topo -m", "nvidia-smi nvlink"]
        }
      ],
      "hints": [
        "DGX A100: 6 NVSwitches, NVLink 3.0",
        "DGX H100: 4 NVSwitches, NVLink 4.0",
        "Topology matrix shows GPU-to-GPU connectivity",
        "'NV#' in matrix = NVLink connection (# = link count)",
        "'SYS' = crosses CPU socket boundary",
        "All GPUs should have NVLink paths to all other GPUs"
      ],
      "estimatedDuration": 5,
      "documentationLinks": [
        {
          "title": "NVLink Topology",
          "url": "https://docs.nvidia.com/dgx/"
        }
      ]
    },
    {
      "id": "step7",
      "title": "Generate Inventory Report",
      "description": "Create a summary inventory report for documentation and validation purposes.",
      "objectives": [
        "Collect all hardware information",
        "Compare against expected configuration",
        "Document any discrepancies",
        "Save report for records"
      ],
      "expectedCommands": [
        "nvidia-smi -q > gpu_inventory.txt",
        "dmidecode > system_inventory.txt",
        "nvsm show inventory"
      ],
      "validationRules": [
        {
          "type": "command-executed",
          "description": "Must generate inventory report",
          "expectedCommands": ["nvidia-smi -q", "nvsm show"]
        }
      ],
      "hints": [
        "Redirect output to files for documentation",
        "'nvsm show inventory' provides comprehensive DGX info",
        "Compare against datasheet specifications",
        "Document serial numbers for support cases",
        "Note any discrepancies for follow-up",
        "Keep inventory on file for change management"
      ],
      "estimatedDuration": 5,
      "documentationLinks": [
        {
          "title": "DGX System Management",
          "url": "https://docs.nvidia.com/dgx/"
        }
      ]
    }
  ],
  "successCriteria": [
    "Queried system information with dmidecode",
    "Validated CPU configuration",
    "Validated system memory",
    "Validated GPU inventory",
    "Validated network adapters",
    "Verified NVLink and NVSwitch",
    "Generated inventory report"
  ],
  "estimatedTime": 35,
  "prerequisites": [],
  "tags": [
    "hardware-inventory",
    "dmidecode",
    "validation",
    "commissioning",
    "beginner",
    "exam-critical",
    "first-steps"
  ]
}
